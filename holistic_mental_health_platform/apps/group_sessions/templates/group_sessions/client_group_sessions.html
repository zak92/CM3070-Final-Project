{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="parent">
  <img class="client-profile-background-image" src="{% static 'assets/client-profile-banner.jpg' %}" alt="profile picture"  /> 
  <img class="profile-image" style="border-radius: 50%;" src="{{user.profile_picture.url}}" alt="profile picture" width="200" height="200"/>
  <p class="profile-username">@{{user.username}}</p>
</div>

<nav class="profile-navbar">
  <ul>
    <li><a href="{% url 'client-profile' request.user.username %}">Profile</a></li>
    <li><a href="{% url 'client-appointments' request.user.username %}">My Appointments</a></li>
    <li><a href="{% url 'client-group-sessions' request.user.username %}">Live Group Sessions</a></li>
    <li><a href="{% url 'edit-client-profile' request.user.username %}">Edit Profile</a></li>
  </ul>
</nav>

<h1>My Live Group Sessions</h1>

{% for client_group_session in client_group_sessions %}
{% if current_date < client_group_session.date or current_date == client_group_session.date and current_time < client_group_session.time %}
  {% if client_group_session.cancelled == False %}
    <h2>Category: {{ client_group_session.category }}</h2>
    <h3>Group Name</h3>
    <p>{{ client_group_session.group_name }}</p>
    <h3>Host</h3>
    <p>{{ client_group_session.service_provider }}</p>
    <h3>Description</h3>
    <p>{{ client_group_session.description }}</p>
    <p>Maximum number of members: {{ client_group_session.max_members }}</p>
    <p>{{ client_group_session.date }}</p>
    <p>{{ client_group_session.time }}</p>
    <p>{{ client_group_session.duration }} min</p>
    <p>Current members joined: {{ client_group_session.total_members }}</p>
    <p>Event ID: {{ client_group_session.id }}</p>
    <a href="{% url 'leave-group' client_group_session.id %}">Leave Group Session</a>
    <a href="{% url 'lobby' %}">Join Call</a>
  <hr>
  {% endif %}
  
{% endif %}
{% endfor %}







<h2>Cancelled Group Sessions (Cancelled by the Host)</h2>
{% for client_group_session in client_group_sessions %}
{% if current_date < client_group_session.date or current_date == client_group_session.date and current_time < client_group_session.time %}
  {% if client_group_session.cancelled == True %}
    <h2>Category: {{ client_group_session.category }}</h2>
    <h3>Group Name</h3>
    <p>{{ client_group_session.group_name }}</p>
    <h3>Host</h3>
    <p>{{ client_group_session.service_provider }}</p>
    <h3>Description</h3>
    <p>{{ client_group_session.description }}</p>
    <p>Maximum number of members: {{ client_group_session.max_members }}</p>
    <p>{{ client_group_session.date }}</p>
    <p>{{ client_group_session.time }}</p>
    <p>{{ client_group_session.duration }} min</p>
    <p>Current members joined: {{ client_group_session.total_members }}</p>
  <hr>
 {% endif %}
{% endif %}
{% endfor %}




{% endblock content %}